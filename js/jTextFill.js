/*
**************************************
******jTextFill 2.0.1*****************
******jTextFill.js*********************
******Created by Harish U Warrier*****
******Created on 01-06-2015***********
******Modified on 17-01-2019**********
******info@jformslider.com************
******www.jformslider.com*************
**************************************
*/

!function($){var clist=Object(),jf_sel=Object();$.fn.jTextFill=function(options){if("string"!=typeof options||""==options){var defaults={list:[],minlength:1,limit:10,multiple:!1,before:function(){},loaded:function(){},filled:function(){},clicked:function(){},attach:function(){return{}},selected:Array()};options=$.extend(defaults,options),$(this).each(function(){if(!$(this).is(":input"))return!0;$(this).attr("autocomplete","off"),$(this).keyup(function(e){var key=e.which,keyarray=[37,38,39,40,13,27,9],txt=$(this).val();if(options.multiple&&(txt=(txt=txt.split(","))[txt.length-1]),!(txt.length<options.minlength)){var res=Array(),$this=$(this),uid=(new Date).valueOf(),list_type=typeof options.list;$(this)[0].hasAttribute("id")&&""!=$(this).attr("id")||$(this).attr("id","jtextfill"+uid),$(this)[0].hasAttribute("data-fill")&&""!=$(this).attr("data-fill")||$(this).attr("data-fill","jtextfilllist"+uid);var id=$(this).attr("data-fill");if(jf_sel[id]=Array(),-1==$.inArray(key,keyarray)){if("string"==list_type){var jdata={key:txt};options.before($(this)),jdata=$.extend(jdata,options.attach($(this).attr("id"))),$.getJSON(options.list,jdata,function(json){var res=search_list(json,txt);clist[id]=res,show_list(res,id,options.limit),align(id,$this),options.loaded($this,json)})}else if("object"==list_type||"array"==list_type){var res=search_list(options.list,txt);clist[id]=res,show_list(res,id,options.limit),align(id,$this)}}else if(38==key){var prev=$("#"+id+" li.active").prev();prev.length>0?($("#"+id+" li").removeClass("active"),prev.addClass("active")):($("#"+id+" li").removeClass("active"),$("#"+id+" li:first").addClass("active")),filltext(id,options,!1)}else if(40==key){var nxt=$("#"+id+" li.active").next();nxt.length>0?($("#"+id+" li").removeClass("active"),nxt.addClass("active")):($("#"+id+" li").removeClass("active"),$("#"+id+" li:first").addClass("active")),filltext(id,options,!1)}else if(13==key){var tid=$this[0].hasAttribute("data-fill")?$this.attr("data-fill"):"";""!=id&&(filltext(id,options),options.clicked(clist[id][$("#"+id+" li.active").attr("data-id")],$this))}else 27!=key&&9!=key||$(".jtextfill").hide()}})}),$("body").on("mouseenter",".jtextfill li",function(){var id=$(this).parents(".jtextfill").attr("id");$("#"+id+" li").removeClass("active"),$(this).addClass("active"),filltext(id,options,!1)}),$("body").on("click",".jtextfill li",function(){var id=$(this).parents(".jtextfill").attr("id");filltext(id,options),options.clicked(clist[id][$("#"+id+" li.active").attr("data-id")],$("[data-fill='"+id+"']"))}),$("body").click(function(e){var tar=$(e.target).css("z-index");$(".jtextfill").hide()})}else string_fns(options,$(this));function remove_px(str){return Number(str.replace("px",""))}function show_list(res,id,limit){var lim=res.length<limit?res.length:limit,div=document.createElement("div");$(div).addClass("jtextfill"),$(div).attr("id",id);for(var ul=document.createElement("ul"),i=0;i<lim;i++){var html=res[i];res[i].hasOwnProperty("html")?html=res[i].html:res[i].hasOwnProperty("value")&&(html=res[i].value);var li=document.createElement("li");li.innerHTML=html,$(li).attr("data-id",i),$(ul).append(li)}$("#"+id).length<=0?($(div).append(ul),$("body").append(div)):$("#"+id).html(ul)}function align(id,$this){var h=$this.height(),w=$this.width(),offset=$this.offset(),bw=remove_px($this.css("border-right-width"))+remove_px($this.css("border-left-width")),mw=remove_px($this.css("margin-right"))+remove_px($this.css("margin-left")),pw=remove_px($this.css("padding-right"))+remove_px($this.css("padding-left")),ptb=remove_px($this.css("padding-bottom"))+remove_px($this.css("padding-top")),tw=bw+mw+pw+w,left=offset.left+"px",top=offset.top+h+ptb+"px";$("#"+id).css("top",top),$("#"+id).css("left",left),$("#"+id).css("width",tw+"px"),$("#"+id).show()}function search_list(list,elem){var res=Array();return $.each(list,function(i,e){e.hasOwnProperty("value")?0===$.trim(e.value).toLowerCase().indexOf(elem.toLowerCase())&&res.push(e):0===$.trim(e).toLowerCase().indexOf(elem.toLowerCase())&&res.push(e)}),res}function filltext(id,options){var $hide=3!=arguments.length||arguments[2],$this=$("#"+id+" li.active"),txt=$this.text();$hide&&$("#"+id).hide();var i=$this.attr("data-id");if(null!=clist[id][i]&&(txt=clist[id][i].hasOwnProperty("value")?clist[id][i].value:clist[id][i]),options.multiple){jf_sel[id].push[txt];var pval=$('[data-fill="'+id+'"]').val(),lval=(pval=pval.split(",")).pop();txt=","==(txt=pval.join(",")+","+txt).substr(0,1)?txt.replace(",",""):txt}$('[data-fill="'+id+'"]').val(txt),options.filled(clist[id][i],$('[data-fill="'+id+'"]'))}function is_url(url){var spl=url.split(".");return!(0!=$.trim(url).search("http://")||spl.length<=1)}function string_fns(act,$this){var ul="#"+$this.attr("data-fill");switch(act.trim()){case"close":$(ul).hide();break;case"show":$(ul).show()}}}}(jQuery);
