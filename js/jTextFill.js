/*
**************************************
******jTextFill 2.0.1*****************
******jTextFill.js*********************
******Created by Harish U Warrier*****
******Created on 01-06-2015***********
******Modified on 12-01-2015**********
******info@jformslider.com************
******www.jformslider.com*************
**************************************
*/

(function(b){var a=Object();var c=Object();b.fn.jTextFill=function(l){if(typeof l=="string"&&l!=""){k(l,b(this));return}var g={list:[],minlength:1,limit:10,multiple:false,before:function(){},loaded:function(){},filled:function(){},clicked:function(){},attach:function(){return{}},selected:Array()};l=b.extend(g,l);b(this).each(function(){if(!b(this).is(":input")){return true}b(this).attr("autocomplete","off");b(this).keyup(function(v){var y=v.which;var s=[37,38,39,40,13,27,9];var t=b(this).val();if(l.multiple){t=t.split(",");t=t[t.length-1]}if(t.length<l.minlength){return}var w=Array();var x=b(this);var u=new Date().valueOf();var q=typeof l.list;if(!b(this)[0].hasAttribute("id")||b(this).attr("id")==""){b(this).attr("id","jtextfill"+u)}if(!b(this)[0].hasAttribute("data-fill")||b(this).attr("data-fill")==""){b(this).attr("data-fill","jtextfilllist"+u)}var n=b(this).attr("data-fill");c[n]=Array();if(b.inArray(y,s)==-1){if(q=="string"){var o={key:t};l.before(b(this));o=b.extend(o,l.attach(b(this).attr("id")));b.getJSON(l.list,o,function(A){var z=j(A,t);a[n]=z;e(z,n,l.limit);i(n,x);l.loaded(x,A)})}else{if(q=="object"||q=="array"){var w=j(l.list,t);a[n]=w;e(w,n,l.limit);i(n,x)}}}else{if(y==38){var p=b("#"+n+" li.active").prev();if(p.length>0){b("#"+n+" li").removeClass("active");p.addClass("active")}else{b("#"+n+" li").removeClass("active");b("#"+n+" li:first").addClass("active")}f(n,l,false)}else{if(y==40){var m=b("#"+n+" li.active").next();if(m.length>0){b("#"+n+" li").removeClass("active");m.addClass("active")}else{b("#"+n+" li").removeClass("active");b("#"+n+" li:first").addClass("active")}f(n,l,false)}else{if(y==13){var r=x[0].hasAttribute("data-fill")?x.attr("data-fill"):"";if(n!=""){f(n,l);l.clicked(a[n][b("#"+n+" li.active").attr("data-id")])}}else{if(y==27||y==9){b(".jtextfill").hide()}}}}}})});b("body").on("mouseenter",".jtextfill li",function(){var m=b(this).parents(".jtextfill").attr("id");b("#"+m+" li").removeClass("active");b(this).addClass("active");f(m,l,false)});b("body").on("click",".jtextfill li",function(){var m=b(this).parents(".jtextfill").attr("id");f(m,l);l.clicked(a[m][b("#"+m+" li.active").attr("data-id")])});b("body").click(function(n){var m=b(n.target).css("z-index");b(".jtextfill").hide()});function d(m){return Number(m.replace("px",""))}function e(t,n,p){var o=t.length<p?t.length:p;var m=document.createElement("div");b(m).addClass("jtextfill");b(m).attr("id",n);var s=document.createElement("ul");for(var q=0;q<o;q++){var r=t[q];if(t[q].hasOwnProperty("html")){r=t[q].html}else{if(t[q].hasOwnProperty("value")){r=t[q].value}}var u=document.createElement("li");u.innerHTML=r;b(u).attr("data-id",q);b(s).append(u)}if(b("#"+n).length<=0){b(m).append(s);b("body").append(m)}else{b("#"+n).html(s)}}function i(m,r){var q=r.height();var v=r.width();var o=r.offset();var u=d(r.css("border-right-width"))+d(r.css("border-left-width"));var y=d(r.css("margin-right"))+d(r.css("margin-left"));var x=d(r.css("padding-right"))+d(r.css("padding-left"));var t=d(r.css("padding-bottom"))+d(r.css("padding-top"));var p=u+y+x+v;var n=o.left+"px";var s=(o.top+q+t)+"px";b("#"+m).css("top",s);b("#"+m).css("left",n);b("#"+m).css("width",p+"px");b("#"+m).show()}function j(o,n){var m=Array();b.each(o,function(p,q){if(q.hasOwnProperty("value")){if(b.trim(q.value).toLowerCase().indexOf(n.toLowerCase())===0){m.push(q)}}else{if(b.trim(q).toLowerCase().indexOf(n.toLowerCase())===0){m.push(q)}}});return m}function f(t,p){var n=arguments.length==3?arguments[2]:true;var s=b("#"+t+" li.active");var m=s.text();if(n){b("#"+t).hide()}var r=s.attr("data-id");if(a[t][r]!=undefined){if(a[t][r].hasOwnProperty("value")){m=a[t][r].value}else{m=a[t][r]}}if(p.multiple){c[t].push[m];var o=b('[data-fill="'+t+'"]').val();o=o.split(",");var q=o.pop();m=o.join(",")+","+m;m=m.substr(0,1)==","?m.replace(",",""):m}b('[data-fill="'+t+'"]').val(m);p.filled(a[t][r])}function h(m){var n=m.split(".");if(b.trim(m).search("http://")!=0||n.length<=1){return false}return true}function k(m,o){var n="#"+o.attr("data-fill");switch(m.trim()){case"close":b(n).hide();break;case"show":b(n).show();break}}}}(jQuery));